/* serialAPI_Config.h
 * Minimal config tailored for:
 *  - Linux driver
 *  - Blocking (no RTOS / Pthread)
 *  - SimpleBGC SerialAPI used via simplebgc_shim.c
 */

#ifndef SERIAL_API_CONFIG_H_
#define SERIAL_API_CONFIG_H_

#ifdef __cplusplus
extern "C" {
#endif

/* Basic ON/OFF */
#define sbgcOFF (0)
#define sbgcON  (-1)

/* ------------------------------------------------------------------ */
/* Build options                                                       */
/* ------------------------------------------------------------------ */

#define SBGC_NEED_SOURCES_MAKE   sbgcON   /* collect all nested sources */

/* ------------------------------------------------------------------ */
/* Module configuration                                                */
/* ------------------------------------------------------------------ */

#define SBGC_ADJVAR_MODULE       sbgcON
#define SBGC_CALIB_MODULE        sbgcOFF
#define SBGC_EEPROM_MODULE       sbgcOFF
#define SBGC_CONTROL_MODULE      sbgcON
#define SBGC_IMU_MODULE          sbgcOFF
#define SBGC_PROFILES_MODULE     sbgcON
#define SBGC_REALTIME_MODULE     sbgcON
#define SBGC_SERVICE_MODULE      sbgcON

/* ------------------------------------------------------------------ */
/* Main SerialAPI configuration                                       */
/* ------------------------------------------------------------------ */

#define SBGC_SYS_BIG_ENDIAN      sbgcOFF     /* little-endian (Raspberry Pi) */
#define SBGC_SEVERAL_DEVICES     sbgcOFF
#define SBGC_PROTOCOL_VERSION    2

/* Blocking mode, no async features */
#define SBGC_NON_BLOCKING_MODE   sbgcOFF

/* TX/RX buffer sizes: 1 => 256 bytes internal buffer */
#define SBGC_TX_BUFFER_SIZE      1
#define SBGC_RX_BUFFER_SIZE      1

#define SBGC_RX_CMD_OLD_PRIOR    sbgcOFF

/* Debug / asserts / confirm handling */
#define SBGC_NEED_DEBUG          sbgcON
#define SBGC_NEED_ASSERTS        sbgcOFF
#define SBGC_NEED_CONFIRM_CMD    sbgcON
#define SBGC_NEED_REF_INFO       sbgcOFF

/* Timeouts (ms) */
#define SBGC_DEFAULT_TIMEOUT     100
#define SBGC_STARTUP_DELAY       500

/* Axis indices (match library expectations) */
#define ROLL                     0
#define PITCH                    1
#define YAW                      2

/* ------------------------------------------------------------------ */
/* AdjVar sub-options (only if ADJVAR module is enabled)              */
/* ------------------------------------------------------------------ */

#if (SBGC_ADJVAR_MODULE)
    #define SBGC_ADJ_VARS_REF_INFO   sbgcON
    #define SBGC_ADJ_VARS_NAMES      sbgcON
    #define SBGC_ADJ_VARS_ADD_FLAG   sbgcOFF
#endif

/* ------------------------------------------------------------------ */
/* Debug log details                                                  */
/* ------------------------------------------------------------------ */

#if (SBGC_NEED_DEBUG)
    #define SBGC_LOG_COMMAND_TIME    sbgcON
    #define SBGC_LOG_COMMAND_NUMBER  sbgcON
    #define SBGC_LOG_COMMAND_DIR     sbgcON
    #define SBGC_LOG_COMMAND_NAME    sbgcON
    #define SBGC_LOG_COMMAND_ID      sbgcON
    #define SBGC_LOG_COMMAND_STATUS  sbgcON
    #define SBGC_LOG_COMMAND_PARAM   sbgcON
    #define SBGC_LOG_COMMAND_DATA    sbgcOFF
    #define SBGC_CUSTOM_SPRINTF      sbgcOFF
#endif

/* ------------------------------------------------------------------ */
/* OS support (all OFF – we’re just blocking on Linux)                */
/* ------------------------------------------------------------------ */

#define SBGC_USE_AZURE_RTOS      sbgcOFF
#define SBGC_USE_FREE_RTOS       sbgcOFF
#define SBGC_USE_PTHREAD_OS      sbgcOFF
#define SBGC_NEED_AUTO_PING      sbgcOFF

/* ------------------------------------------------------------------ */
/* Driver selection                                                    */
/* ------------------------------------------------------------------ */

#define SBGC_USE_ARDUINO_DRIVER  sbgcOFF
#define SBGC_USE_ESPIDF_DRIVER   sbgcOFF
#define SBGC_USE_LINUX_DRIVER    sbgcON
#define SBGC_USE_STM32_DRIVER    sbgcOFF

#if (SBGC_USE_LINUX_DRIVER && (SBGC_SEVERAL_DEVICES == sbgcOFF))
    /* Match what the demo used; change if your board enumerates differently */
    #define SBGC_SERIAL_PORT     "/dev/ttyUSB0"
    #define SBGC_SERIAL_SPEED    B115200
#endif

#ifdef __cplusplus
}
#endif

#endif /* SERIAL_API_CONFIG_H_ */
